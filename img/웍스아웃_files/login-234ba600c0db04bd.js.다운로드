(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{37467:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var n=r(59499),s=r(50029),a=r(16835),o=r(87794),i=r.n(o),c=r(41664),u=r.n(c),l=r(11163),d=r(67294),p=r(42283),f=r(11529),m=r(4726),h=r(52424),x=r(46587),g=r(91789),v=r(44964),y=r(88957),b=r(95754),k=r(70461),j=r(30381),w=r.n(j),N=r(97701),_=r(85893);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(){var e,t;(0,d.useEffect)((function(){h.k.sendAmplitude("log_in_page_viewed")}),[]);var r=(0,l.useRouter)(),n=(0,d.useState)(!1),o=n[0],c=n[1],j=(0,d.useState)(""),S=j[0],P=j[1],I=(0,d.useState)(!1),E=I[0],Z=I[1],C=(0,k.Z)(["userId"]),A=(0,a.Z)(C,3),U=A[0],z=A[1],D=A[2],T=(0,p.cI)(),q=T.register,B=T.handleSubmit,G=T.setValue,X=T.formState.errors,F=(0,v.Z)().mutate,L=(0,y.Z)().mutate,M=(0,b.Z)().mutate,R=(0,v.Z)().loggedIn;(0,d.useEffect)((function(){U.userId&&(G("email",U.userId),Z(!0))}),[]),(0,d.useEffect)((function(){R&&(r.push("/"),(0,N.P)("\uc774\ubbf8 \ub85c\uadf8\uc778\uc774 \ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4."))}),[R]);var H=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.k.sendAmplitude("non_member_order_check_button_clicked");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,s.Z)(i().mark((function e(t){var n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.email,a=t.password,m.Z.login({email:n,password:a}).then(function(){var e=(0,s.Z)(i().mark((function e(t){var s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.data.code,a=t.headers,"SUCCESS"!==s){e.next=14;break}return E?z("userId",n,{path:"/",expires:w()().add(30,"days").toDate()}):D("userId"),localStorage.setItem("token",a.authorization),h.k.postMessage(h.a.setToken,a.authorization),e.next=7,J(n);case 7:return h.k.sendAmplitude("sign_in_completed"),e.next=10,h.k.sendBraze(g.z.SIGN_IN_COMPLETED);case 10:F(),L(),M(),r.query.location?r.push(r.query.location):r.push("/");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.response.data.message;P(t),c(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.getUserInfo().then(function(){var e=(0,s.Z)(i().mark((function e(r){var n,s,a,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"SUCCESS"===r.data.code&&(n=r.data.payload,s=n.userGender,a=n.userId,o=n.userPhone,h.k.sendBraze("changeUser",a.toString()),c={userAttribute:{userID:a,userEmail:t,userPhone:o,gender:s}},h.k.sendAirbridge(x.y.signIn,null,c),h.k.sendBraze("changeUser",String(r.data.payload.userId.toString())),h.k.sendAmplitude("setUserId",String(a.toString())),h.k.sendAirbridge("setUserId",void 0,String(a.toString())),h.k.sendAmplitude("setUserProperties#first_name",r.data.payload.userName.toString()),h.k.sendAmplitude("setUserProperties#gender",r.data.payload.userGender),h.k.sendAmplitude("setUserProperties#phone",r.data.payload.userPhone));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Fb,{}),(0,_.jsx)(f.up,{mobileLeft:"bookmark",mobileRight:"default"}),(0,_.jsx)(f.N4,{title:"\ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",description:S,buttonText:"\ud655\uc778",open:o,onClose:function(){return c(!1)}}),(0,_.jsxs)("div",{className:"max-w-lg mx-auto px-4 space-y-3 md:pt-32",children:[(0,_.jsx)(f.H2,{className:"font-normal text-12",children:"\ub85c\uadf8\uc778"}),(0,_.jsxs)("form",{className:"flex flex-col space-y-1 text-12",onSubmit:B(V),children:[(0,_.jsx)("div",{className:"pt-3",children:"\uc544\uc774\ub514"}),(0,_.jsx)(f.nv,O({className:"text-12 border-black h-9",type:"email",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",helper:null===(e=X.email)||void 0===e?void 0:e.message,autoComplete:"username"},q("email",{required:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}))),(0,_.jsx)("div",{className:"pt-4",children:"\ube44\ubc00\ubc88\ud638"}),(0,_.jsx)(f.nv,O({type:"password",className:"text-12 border-black h-9",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",helper:null===(t=X.password)||void 0===t?void 0:t.message,autoComplete:"current-password"},q("password",{required:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}))),(0,_.jsxs)("div",{className:"text-12 font-normal pt-5",children:[(0,_.jsxs)("div",{className:"flex flex-row space-x-2 items-center float-left",children:[(0,_.jsx)(f.XZ,{className:"mr-1",onChange:function(e){return Z(e.target.checked)},checked:E}),"\uc544\uc774\ub514 \uc800\uc7a5"]}),(0,_.jsxs)("div",{className:"flex flex-row space-x-2 items-center float-right",children:[(0,_.jsx)(u(),{href:"/find/id",children:"\uc544\uc774\ub514 \ucc3e\uae30"}),(0,_.jsx)("div",{className:"w-px h-3 bg-gray-400"}),(0,_.jsx)(u(),{href:"/find/password",children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]})]}),(0,_.jsxs)("div",{className:"space-y-2 flex flex-col pt-5",children:[(0,_.jsx)(f.zx,{text:"\ub85c\uadf8\uc778",type:"submit",className:"filled-gray-900 py-2"}),(0,_.jsx)(f.zx,{to:"/signup",text:"\ud68c\uc6d0\uac00\uc785",type:"button",className:"outlined-gray-900 font-normal py-2"})]}),(0,_.jsx)(u(),{href:"/non-member",children:(0,_.jsx)("a",{className:"text-gray-500 text-12 mx-auto pt-4",onClick:H,children:"\ube44\ud68c\uc6d0 \uc8fc\ubb38\uc870\ud68c"})})]})]})]})}},73700:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(37467)}])}},function(e){e.O(0,[9774,2888,179],(function(){return t=73700,e(e.s=t);var t}));var t=e.O();_N_E=t}]);